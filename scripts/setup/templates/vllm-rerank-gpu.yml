  vllm-rerank:
    image: vllm/vllm-openai:${VLLM_RERANK_IMAGE_TAG:-latest}
    command: >
      ${VLLM_RERANK_MODEL:-BAAI/bge-reranker-v2-m3}
      --port ${VLLM_RERANK_PORT:-8000}
      --dtype ${VLLM_RERANK_DTYPE:-float16}
      ${VLLM_RERANK_EXTRA_ARGS:-}
    environment:
      NVIDIA_VISIBLE_DEVICES: ${NVIDIA_VISIBLE_DEVICES:-all}
      NVIDIA_DRIVER_CAPABILITIES: ${NVIDIA_DRIVER_CAPABILITIES:-compute,utility}
    ports:
      - "${VLLM_RERANK_PORT:-8000}:${VLLM_RERANK_PORT:-8000}"
    volumes:
      - vllm_rerank_cache:/root/.cache/huggingface
    gpus: all
    restart: unless-stopped
